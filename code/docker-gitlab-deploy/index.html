<!doctype html>
<html class="no-js" lang="tc">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Fancy">
    <meta name="description" content="Bilberry Premium Theme for Hugo.">
    <meta name="keywords" content="blog,personal,responsive,search,font awesome,pages,posts,multilingual,highlight.js,syntax highlighting,premium,shortcuts">
    <meta name="generator" content="Hugo 0.67.0" />
    <title> Docker搭建維護Gitlab  | Fancy‘s Blog</title>
    <meta name="description" content="Docker搭建維護Gitlab  - Bilberry Premium Theme for Hugo.">
    <meta itemprop="name" content="Docker搭建維護Gitlab ">
    <meta itemprop="description" content="Docker搭建維護Gitlab  - Bilberry Premium Theme for Hugo.">
    <meta property="og:title" content="Docker搭建維護Gitlab ">
    <meta property="og:description" content="Docker搭建維護Gitlab  - Bilberry Premium Theme for Hugo.">
    <meta property="og:image" content="https://www.gravatar.com/avatar/3776f719d93bf9d357bf83b6e50e10d6?size=200">
    <meta property="og:url" content="https://bbyy.io/code/docker-gitlab-deploy/">
    <meta property="og:site_name" content="Fancy‘s Blog">
    <meta property="og:type" content="article">

    
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ed5165">
<meta name="msapplication-TileColor" content="#ed5165">
<meta name="theme-color" content="#ed5165">

    
    <link href="/code/docker-gitlab-deploy/" rel="alternate" type="application/rss+xml" title="Fancy‘s Blog" />
    <link href="/code/docker-gitlab-deploy/" rel="feed" type="application/rss+xml" title="Fancy‘s Blog" />
    

    

    <link rel="stylesheet" href="https://bbyy.io/theme.css">

    

    
    
    
</head>

<body class="bilberry-hugo-theme">

    
    <nav>

    <div class="container">
        <ul class="topnav">
            
            
            <li><a href="https://bbyy.io/page/about-me/">關於本人</a></li>
            
            
        </ul>

        
        <div id="search-box" class="search">
            <i class="fas fa-search"></i>
            <input id="search" type="text" placeholder="">
        </div>
        
    </div>
</nav>


    
<header>

    <div class="container">
        <div class="logo">
            <a id="siteBaseUrl" href="/" class="logo">
                
                <img src="https://www.gravatar.com/avatar/3776f719d93bf9d357bf83b6e50e10d6?d=mm&size=200" alt="">
                

                <span class="overlay"><i class="fa fa-tape"></i></span>
            </a>
        </div>
        <div class="titles">
            <h3 class="title"><a
                    href="/">Fancy‘s Blog</a></h3>
            
            <span class="subtitle">Fancy的個人Blog，技術Blog可移步SC語言</span>
            
        </div>

        <div class="languages">
        
            
                <a href="https://bbyy.io/" class="active">tc</a>
            
        
            
                <a href="https://bbyy.io/sc/">sc</a>
            
        
            
                <a href="https://bbyy.io/en/">en</a>
            
        
        </div>
        

        
            <div class="toggler">
                
                <i class="fa fa-bars" aria-hidden="true"></i>
            </div>
        </div>
</header>


    <div class="main container">
        
     
    <div class="article-wrapper u-cf single">
        
            <a class="bubble" href="https://bbyy.io/code/docker-gitlab-deploy/">
    <i class="fas fa-fw fa-code"></i>
</a>

<article class="default article">
    
    <div class="featured-image">
        <a href="https://bbyy.io/code/docker-gitlab-deploy/">
            
                <img src="/code/docker-gitlab-deploy/featuredImage.png" alt="">
            
        </a>
    </div>


    <div class="content">
    <h1 class="article-title"><a href="https://bbyy.io/code/docker-gitlab-deploy/">Docker搭建維護Gitlab </a></h1>
    <div class="meta">
        
        
        <span class="date moment">2020-01-20</span>
        
        

        
        <span class="readingTime"></span>
        

        
        <span class="categories">
            
                
                <a href="https://bbyy.io/categories/code/">Code</a>
                
            
        </span>
        

        
        <span class="author">
            
            <a href="https://bbyy.io/author/fancy/">Fancy</a>
            
        </span>
        
    </div>

    
    <p>Gitlab 從安裝到升級維護，內含 Gitlab 的維護指南，Docker基本操作，Crontab基本操作</p>
<h2 id="docker的gitlab安裝流程">Docker的Gitlab安裝流程</h2>
<blockquote>
<p>碎碎念：目前家裏運行的14個docker容器11個是在Debian，hassio，qbittorent，pihole，openwrt，supervisor，Don&rsquo;t starve Togeter Server，Minecarft Server，Netease Music API其他亂七八糟各種服務 自從有了Docker再也找不到不用的理由。</p>
</blockquote>
<ul>
<li>添加 CA 證書（Debian系）:</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    apt-transport-https <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    ca-certificates <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    curl <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    software-properties-common
</code></pre></div><ul>
<li>添加 GPG 密鑰（Debian系）:</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
</code></pre></div><ul>
<li>添加 source.list: Debian上遊額外安裝</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo add-apt-repository <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    <span style="color:#e6db74">&#34;deb [arch=amd64] https://download.docker.com/linux/ubuntu \
</span><span style="color:#e6db74">    </span><span style="color:#66d9ef">$(</span>lsb_release -cs<span style="color:#66d9ef">)</span><span style="color:#e6db74"> \
</span><span style="color:#e6db74">    stable&#34;</span>
</code></pre></div><ul>
<li>安裝 Docker CE:</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt-get update

$ sudo apt-get install docker-ce
</code></pre></div><ul>
<li>啟動 Docker CE:</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo service docker start
</code></pre></div><ul>
<li>測試 Docker CE:</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo service docker start
</code></pre></div><ul>
<li>Docker 構建命令 (我這裏命名為v2 )</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo docker run --detach <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>--hostname gitlab.bbyy.io <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>--publish 10443:443 --publish 8099:80 --publish 22:22 <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>--name gitlab <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>--restart always <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>--volume /gitlab/gitlabv2/config:/etc/gitlab <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>--volume /gitlab/gitlabv2/logs:/var/log/gitlab <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>--volume /gitlab/gitlabv2/data:/var/opt/gitlab <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span> gitlab/gitlab-ce
</code></pre></div><ul>
<li>Gitlab 部署命令</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">Please enter the gitlab<span style="color:#f92672">-</span>ci coordinator URL

<span style="color:#75715e"># http://39.178.143.204:8099/ci 部署位置</span>

Please enter the gitlab<span style="color:#f92672">-</span>ci token <span style="color:#66d9ef">for</span> this runner

<span style="color:#75715e"># t8fCtUsbPcx_SfsakdnRF</span>

Please enter the gitlab<span style="color:#f92672">-</span>ci description <span style="color:#66d9ef">for</span> this runner[f11b51cf68dc]:

<span style="color:#75715e"># 輸入簡介</span>

Please enter the gitlab<span style="color:#f92672">-</span>ci tags <span style="color:#66d9ef">for</span> this runner (comma separated):

<span style="color:#75715e"># 幫這個runner加上tag，這tag會影響到runner要抓哪個工作來執行 (有多個以逗號分開，例如tag1,tag2)</span>

Please enter the executor: ssh, docker<span style="color:#f92672">+</span>machine, docker<span style="color:#f92672">-</span>ssh<span style="color:#f92672">+</span>machine, kubernetes, docker, parallels, virtualbox, docker<span style="color:#f92672">-</span>ssh, shell:

<span style="color:#75715e"># docker</span>

Please enter the Docker image (eg<span style="color:#f92672">.</span> alpine:latest):

<span style="color:#75715e"># 預設使用的docker-image</span>
</code></pre></div><h1 id="gitlab-跨版本遷移及更新流程">Gitlab 跨版本遷移及更新流程</h1>
<ul>
<li>查詢版本</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cat /opt/gitlab/embedded/service/gitlab-rails/VERSION 
<span style="color:#75715e"># 以最初為8.8.5為例，這差不多是我找到最早的還有大量用戶的版本了，其他的版本均適用</span>
</code></pre></div><ul>
<li>備份</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo gitlab-rake gitlab:backup:create STRATEGY<span style="color:#f92672">=</span>copy  
<span style="color:#75715e"># 備份後的文件壹般是位於/var/opt/gitlab/backups下, 自動生成文件名文件名如1541739348_2020_01_19_10.3.3_gitlab_backup.tar</span>
</code></pre></div><ul>
<li>關閉部分gitlab服務</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ gitlab-ctl stop unicorn
$ gitlab-ctl stop sidekiq
$ gitlab-ctl stop nginx

</code></pre></div><ul>
<li>利用大版本號的最新版本，按照以下推薦升級順序</li>
</ul>
<p><code>8.8.5 &gt; 8.17.7 &gt; 9.5.10 &gt; 10.8.7 &gt; 11.11.8 &gt; 12.0.12 &gt; 12.3.5</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ yum list gitlab-ce-10*
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ yum update gitlab-ce-10.8.7
<span style="color:#75715e"># $ wget https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el7/gitlab-ce-10.6.2-ce.0.el7.x86_64.rpm</span>
</code></pre></div><ul>
<li>同理多次，直到最後壹次</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ yum update gitlab-ce
<span style="color:#75715e"># $ rpm -Uvh gitlab-ce-10.8.7-ce.0.el7.x86_64.rpm</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ gitlab-ctl reconfigure
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ gitlab-ctl restart
</code></pre></div><ul>
<li>中文社區版漢化</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd
<span style="color:#75715e"># $ git clone https://gitlab.com/xhang/gitlab.git -b v8.17.8-zh</span>
$ git clone https://gitlab.com/xhang/gitlab.git
$ cat gitlab/VERSION
<span style="color:#75715e"># 12.3.5</span>
</code></pre></div><pre><code class="language-git" data-lang="git">$ gitlab-ctl stop
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">cd /root/gitlab
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ git diff v11.9.6 v11.9.6-zh &gt; ../11.9.6-zh.diff
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd ..
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ yum install patch
$ patch -d /opt/gitlab/embedded/service/gitlab-rails -p1 &lt; 11.9.6-zh.diff
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gitlab-ctl start
</code></pre></div><ul>
<li>重更新</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gitlab-ctl reconfigure
$ gitlab-ctl restart
</code></pre></div><ul>
<li>數據遷移</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ scp -pr 1541677863_2020_01_18_11.4.5_gitlab_backup.tar root@10.101.45.12:/var/opt/gitlab/backups
<span style="color:#75715e"># 把對應版本的數據從舊服務器上拷貝到新服務器的gitlab備份目錄裏</span>
<span style="color:#75715e"># 新服務器執行恢復命令</span>
$ chown -R git.git /var/opt/gitlab/backups/
$ gitlab-rake gitlab:backup:restore RAILS_ENV<span style="color:#f92672">=</span>production BACKUP<span style="color:#f92672">=</span>1541677863_2020_01_18_11.4.5

註意：這裏沒有後面的_gitlab_backup.tar名字
壹路yes，恢復是會先刪除新服務器上所有gitlab數據的。

</code></pre></div><h1 id="qa">Q&amp;A</h1>
<ol>
<li>報錯信息</li>
</ol>
<pre><code>The data directory was initialized by PostgreSQL version 9.2.18, which is not compatible with this version 9.6.2.
</code></pre><ul>
<li>
<p>Postgresql版本過低</p>
<ul>
<li>備份</li>
</ul>
<pre><code> $ mv /usr/local/var/postgres /usr/local/var/postgres9351
</code></pre><ul>
<li>初始化新數據庫</li>
</ul>
<pre><code>  $ initdb /usr/local/var/postgres -E utf8
</code></pre><ul>
<li>升級</li>
</ul>
<pre><code> $ pg_upgrade -b oldbindir -B newbindir -d olddatadir -D newdatadir
</code></pre></li>
</ul>
<ol start="2">
<li>報錯信息</li>
</ol>
<pre><code>Removals:
* git_data_dir has been deprecated since 8.10 and was removed in 11.0. Use git_data_dirs instead.
</code></pre><ul>
<li>
<p><code>git_data_dir</code> 寫法更新，僅出現在11.0之前的老版本</p>
<ul>
<li>原語法</li>
</ul>
<pre><code> git_data_dir /data/git
</code></pre><ul>
<li>新語法</li>
</ul>
<pre><code>  git_data_dirs({
     &quot;default&quot; =&gt; {
        &quot;path&quot; =&gt; &quot;/data/git&quot;
     }
  })
</code></pre><pre><code> gitlab-ctl reconfigure
</code></pre></li>
</ul>
<h2 id="docker-基本操作">Docker 基本操作</h2>
<ul>
<li>查看鏡像</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ docker images
</code></pre></div><ul>
<li>打包提交</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ docker commit -a <span style="color:#e6db74">&#34;fancy&#34;</span> -m <span style="color:#e6db74">&#34;fancy‘s backup&#34;</span>
</code></pre></div><p>容器名稱或id 打包的鏡像名稱:標簽</p>
<ul>
<li>OPTIONS說明：
-a :提交的鏡像作者；
-c :使用Dockerfile指令來創建鏡像；
-m :提交時的說明文字；
-p :在commit時，將容器暫停。</li>
</ul>
<p>例：<code>docker commit -p d479774b6e8e -a &quot;fancy&quot; -m &quot;Gitlab before L10n&quot; Gitlab-001</code></p>
<ul>
<li>備份鏡像</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ docker save -o /data/images-backup/container-gitlab-backup.tar container-gitlab-backup
</code></pre></div><ul>
<li>
<p>說明:
<code>/data/images-backup/container-gitlab-backup.tar</code>鏡像導出存放路徑
<code>container-gitlab-backup</code> 鏡像在docker裏面的名字</p>
</li>
<li>
<p>恢復鏡像</p>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ docker import <span style="color:#f92672">[</span>OPTIONS<span style="color:#f92672">]</span> URL|- <span style="color:#f92672">[</span>REPOSITORY<span style="color:#f92672">[</span>:TAG<span style="color:#f92672">]]</span>
<span style="color:#75715e"># 導入hello快照，並制定鏡像標簽為gitlab:1.0</span>
$ cat gitlab.tar | sudo docker import - hello:1.0
</code></pre></div><h2 id="docker-gitlab-操作">Docker Gitlab 操作</h2>
<ul>
<li>任意位置進入Docker內Gitlab環境</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo docker exec -it gitlab /bin/bash
</code></pre></div><ul>
<li>目錄/文件</li>
</ul>
<pre><code>主配置文件：/etc/gitlab/gitlab.rb
程序安裝目錄：/opt/gitlab
程序配置和運行目錄：/var/opt/gitlab
程序日誌目錄：/var/log/gitlab
</code></pre><ul>
<li>命令</li>
</ul>
<pre><code>升級數據庫：gitlab-rake db:migrate
顯示配置環境：gitlab-rake gitlab:env:info
檢查gitlab運行環境：gitlab-rake gitlab:check
gitlab安裝（慎用，會清數據庫）：gitlab-rake gitlab:setup
gitlab啟動/停止/重啟：gitlab-ctl start/stop/restart
</code></pre><h2 id="目錄與crontab自動備份">目錄與Crontab自動備份</h2>
<blockquote>
<p>這裏繼承我的Docker run 命令，如果改動的目錄也會變更</p>
</blockquote>
<ul>
<li>備份目錄</li>
</ul>
<pre><code>/gitlab/gitlabv2/data/backups
</code></pre><ul>
<li>設置目錄</li>
</ul>
<pre><code>/gitlab/gitlabv2/config
</code></pre><ul>
<li>日誌目錄</li>
</ul>
<pre><code>/gitlab/gitlabv2/logs
</code></pre><ul>
<li>手動備份</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-BASH" data-lang="BASH">$ docker exec -it gitlab bash <span style="color:#75715e"># 進入容器</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ gitlab-rake gitlab:backup:create
</code></pre></div><ul>
<li>
<p>自動備份<code>借助corntab，RHEL等發行版需自行安裝</code></p>
<ul>
<li>
<p><code>vi /etc/rc.d/rc.local </code>添加 cron 設置開機啟動</p>
<pre><code>/sbin/service crond start   
</code></pre></li>
<li>
<p><code>vi ~/gitlab_backup.sh</code> 編輯cron腳本</p>
<pre><code>#！ /bin/bash
case &quot;$1&quot; in 
    start)
            docker exec gitlab gitlab-rake gitlab:backup:create
            ;;
esac
</code></pre></li>
<li>
<p><code>gitlab_backup.sh start</code></p>
</li>
<li>
<p><code>crontab -e</code></p>
</li>
</ul>
<pre><code>0 13 * * * /root/gitlab_backup.sh start
0 18 * * * /root/gitlab_backup.sh start
0 23 * * * /root/gitlab_backup.sh start
</code></pre><ul>
<li>附：cron 語法</li>
</ul>
<pre><code>*  *  *  *  *  command
分  時  日  月  周  命令
  
其中，
第1列表示分鐘，1~59，每分鐘用*表示
第2列表示小時，1~23，（0表示0點）
第3列表示日期，1~31
第4列表示月份，1~12
第5列表示星期，0~6（0表示星期天）
第六列表示要運行的命令。
</code></pre></li>
</ul>
    
</div>

    
<div class="footer">


    
        <div class="tags">
            <i class="fa fa-tags"></i>
            <div class="links">
                
                
                <a href="https://bbyy.io/tags/crontab/">Crontab</a>
                
                
                
                <a href="https://bbyy.io/tags/gitlab/">Gitlab</a>
                
                
                
                <a href="https://bbyy.io/tags/docker/">Docker</a>
                
                
            </div>
        </div>
    

    
    <div class="languages">
        <i class="fa fa-language"></i>
        <div class="links">
            
                <a href="https://bbyy.io/sc/code/docker-gitlab-deploy/">sc</a>
            
        </div>
    </div>
    
</div>

</article>

        
    </div>

    
        <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "hallucigenia" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    

     

    </div>

    
<footer>
    <div class="container">

        
        <div class="recent-posts">
            <strong></strong>
            <ul>
                
                <li>
                    <a href="https://bbyy.io/gallery/c200&#43;sp3000/">朝花夕拾</a>
                </li>
                
                <li>
                    <a href="https://bbyy.io/code/kubernetes-get-start/">kubeadm搭建部署kubernetes集群</a>
                </li>
                
                <li>
                    <a href="https://bbyy.io/code/getting-started-gdb/">Python標準庫 —— pdb調試工具使用</a>
                </li>
                
                <li>
                    <a href="https://bbyy.io/code/a-tour-of-go-exercise-solutions/">Golang 练习N则</a>
                </li>
                
                <li>
                    <a href="https://bbyy.io/code/docker-gitlab-deploy/">Docker搭建維護Gitlab </a>
                </li>
                
                <li>
                    <a href="https://bbyy.io/gallery/gallery-test/">我的旅游记录</a>
                </li>
                
            </ul>
        </div>
        

        
        <div class="categories">
            <a href="/categories/"><strong></strong></a>
            <ul>
                
                <li>
                    <a href="/categories/code">Code
                        (11)</a>
                </li>
                
                <li>
                    <a href="/categories/holidays">Holidays
                        (2)</a>
                </li>
                
                <li>
                    <a href="/categories/travelling">Travelling
                        (2)</a>
                </li>
                
                <li>
                    <a href="/categories/lyric">Lyric
                        (1)</a>
                </li>
                
                <li>
                    <a href="/categories/music">Music
                        (1)</a>
                </li>
                
                <li>
                    <a href="/categories/privacy">Privacy
                        (1)</a>
                </li>
                
                <li>
                    <a href="/categories/%E7%9B%A3%E8%A6%96%E5%99%A8">監視器
                        (1)</a>
                </li>
                
            </ul>
        </div>
        

        <div class="right">
            
            <div class="external-profiles">
                <strong></strong>

                
                <a href="https://twitter.com/_fancyan" target="_blank"><i class="fab fa-twitter"></i></a>
                
                <a href="https://www.instagram.com/monophoton" target="_blank"><i class="fab fa-instagram"></i></a>
                
                <a href="https://github.com/hallucigenia" target="_blank"><i class="fab fa-github"></i></a>
                
            </div>
            

            <div class="languages">
                <strong></strong>
                
                
                <a href="https://bbyy.io/" class="active">tc</a>
                
                
                
                <a href="https://bbyy.io/sc/">sc</a>
                
                
                
                <a href="https://bbyy.io/en/">en</a>
                
                
            </div>
            
        </div>
    </div>
</footer>


<div class="credits">
    <div class="container">
        <div class="copyright">
            <a href="https://t.me/hallucigenia" target="_blank">
                &copy;
                
                2020
                
                 by Fancy 
            </a>
            
        </div>
        <div class="author">
            <a href="https://bbyy.io"
                target="_blank">Fancy&#39;s Blog</a>
        </div>
    </div>
</div>


    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-160694437-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


    


    <script type="text/javascript" src="https://bbyy.io/theme.js"></script>

    
    
    

    
    <div id="activate-algolia-search" class="hidden">
  <input type="hidden" id="algolia-search-appId" value="8JWRQ9KNXC">
  <input type="hidden" id="algolia-search-apiKey" value="0f05c447096335c55a457fe4cfaae96a">
  <input type="hidden" id="algolia-search-indexName" value="grimalog">
  <input type="hidden" id="algolia-search-noSearchResults" value="">

  
</div>

    


</body>

</html>
